# Docker AI ì„œë¹„ìŠ¤ ì‹¤í–‰ ê°€ì´ë“œ (Windows ê¸°ì¤€)

> **ì£¼ì˜**: ì´ ê°€ì´ë“œëŠ” Windows í™˜ê²½ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
>
> **ë³€ê²½ì‚¬í•­**: `src/`, `docker/`, `tests/` ë“±ì´ `ì‹¤ìŠµê²°ê³¼/` í´ë”ë¡œ ì´ë™ë˜ì—ˆìŠµë‹ˆë‹¤.
>
> **í•œê¸€ ê°ì •ë¶„ì„ ë¬¸ì œ**: ê¸°ì¡´ ëª¨ë¸ì€ ì˜ì–´ ì „ìš©ì…ë‹ˆë‹¤. í•œê¸€ ì§€ì›ì´ í•„ìš”í•˜ë©´ [í•œê¸€-ê°ì •ë¶„ì„-ê°œì„ ì‚¬í•­.md](í•œê¸€-ê°ì •ë¶„ì„-ê°œì„ ì‚¬í•­.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

---

## ğŸ“‹ ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­ (Windows)

### í•„ìˆ˜ ì„¤ì¹˜
1. **Python 3.10 ì´ìƒ**
   - ë‹¤ìš´ë¡œë“œ: https://www.python.org/downloads/
   - ì„¤ì¹˜ ì‹œ "Add Python to PATH" ì²´í¬
   - í™•ì¸: `python --version`

2. **Docker Desktop** (ì„ íƒì‚¬í•­)
   - ë‹¤ìš´ë¡œë“œ: https://www.docker.com/products/docker-desktop/
   - WSL2 ë°±ì—”ë“œ ê¶Œì¥

### í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜

```cmd
REM PowerShell ë˜ëŠ” CMDì—ì„œ ì‹¤í–‰
pip install fastapi uvicorn transformers torch pydantic python-dotenv
```

**ë˜ëŠ” requirements.txt ì‚¬ìš©**:
```cmd
cd "Side Project\[AIì´í–‰íŒŒíŠ¸] Dockerì— AI ì„œë¹„ìŠ¤ í™˜ê²½ êµ¬ì¶•í•´ë³´ê¸°\ì‹¤ìŠµê²°ê³¼"
pip install -r requirements.txt
```

---

## ğŸš€ ì‹¤í–‰ ë°©ë²• (Windows)

### ë°©ë²• 1: CMDì—ì„œ ì‹¤í–‰ (ê¶Œì¥)

```cmd
REM 1. í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™
cd /d "D:\00.Develop\CTO\Side Project\[AIì´í–‰íŒŒíŠ¸] Dockerì— AI ì„œë¹„ìŠ¤ í™˜ê²½ êµ¬ì¶•í•´ë³´ê¸°\ì‹¤ìŠµê²°ê³¼"

REM 2. í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ìƒì„± (ì²˜ìŒ í•œ ë²ˆë§Œ)
copy .env.example .env

REM 3. ì˜ì¡´ì„± ì„¤ì¹˜ (ì²˜ìŒ í•œ ë²ˆë§Œ)
pip install -r requirements.txt

REM 4. src í´ë”ë¡œ ì´ë™
cd src

REM 5. ì„œë²„ ì‹¤í–‰
python main.py
```

### ë°©ë²• 2: PowerShellì—ì„œ ì‹¤í–‰

```powershell
# 1. í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™
Set-Location "D:\00.Develop\CTO\Side Project\[AIì´í–‰íŒŒíŠ¸] Dockerì— AI ì„œë¹„ìŠ¤ í™˜ê²½ êµ¬ì¶•í•´ë³´ê¸°\ì‹¤ìŠµê²°ê³¼"

# 2. í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ìƒì„±
Copy-Item .env.example .env

# 3. ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# 4. src í´ë”ë¡œ ì´ë™ í›„ ì‹¤í–‰
Set-Location src
python main.py
```

### ë°©ë²• 3: ë°°ì¹˜ íŒŒì¼ë¡œ ì‹¤í–‰

`ì‹¤ìŠµê²°ê³¼` í´ë”ì— `run-server.bat` ìƒì„±:

```batch
@echo off
echo ================================
echo AI ê°ì •ë¶„ì„ ì„œë¹„ìŠ¤ ì‹œì‘
echo ================================

REM í™˜ê²½ë³€ìˆ˜ íŒŒì¼ í™•ì¸
if not exist .env (
    echo .env íŒŒì¼ ìƒì„± ì¤‘...
    copy .env.example .env
)

REM ì„œë²„ ì‹¤í–‰
cd src
echo ì„œë²„ ì‹¤í–‰ ì¤‘... (Ctrl+Cë¡œ ì¢…ë£Œ)
python main.py

pause
```

**ì‹¤í–‰**: `run-server.bat` ë”ë¸”í´ë¦­

**ì‹¤í–‰ ë¡œê·¸ ì˜ˆì‹œ**:
```
INFO:     Started server process [12345]
INFO:     Waiting for application startup.
INFO:     Loading AI model...
INFO:     Model loaded successfully
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
```

---

### ë°©ë²• 4: Docker Compose ì‹¤í–‰ (Windows)

#### ì‚¬ì „ ì¤€ë¹„
- Docker Desktop ì„¤ì¹˜ ë° ì‹¤í–‰
- WSL2 í™œì„±í™” (ê¶Œì¥)

#### ì‹¤í–‰ ëª…ë ¹

```cmd
REM ì‹¤ìŠµê²°ê³¼ í´ë”ë¡œ ì´ë™
cd /d "D:\00.Develop\CTO\Side Project\[AIì´í–‰íŒŒíŠ¸] Dockerì— AI ì„œë¹„ìŠ¤ í™˜ê²½ êµ¬ì¶•í•´ë³´ê¸°\ì‹¤ìŠµê²°ê³¼"

REM Docker Compose ë¹Œë“œ ë° ì‹¤í–‰
docker-compose -f docker\docker-compose.yml up --build

REM ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰
docker-compose -f docker\docker-compose.yml up -d --build
```

#### ì¢…ë£Œ ëª…ë ¹

```cmd
docker-compose -f docker\docker-compose.yml down
```

---

## ğŸ§ª ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸ (Windows)

### 1. í—¬ìŠ¤ì²´í¬

**PowerShell**:
```powershell
Invoke-RestMethod -Uri "http://localhost:8000/health"
```

**CMD + curl** (Windows 10 1803 ì´ìƒ):
```cmd
curl http://localhost:8000/health
```

**ë¸Œë¼ìš°ì €**:
- http://localhost:8000/health

**ì‘ë‹µ ì˜ˆì‹œ**:
```json
{
  "status": "healthy",
  "timestamp": "2025-10-26T12:00:00.123456",
  "version": "1.0.0",
  "model_loaded": true
}
```

### 2. ê°ì • ë¶„ì„ í…ŒìŠ¤íŠ¸

#### ê¸ì • í…ìŠ¤íŠ¸
```bash
# Windows (PowerShell)
$body = @{ text = "ì˜¤ëŠ˜ ì •ë§ ê¸°ë¶„ì´ ì¢‹ë‹¤!" } | ConvertTo-Json
Invoke-RestMethod -Uri "http://localhost:8000/predict" -Method POST -Body $body -ContentType "application/json"

# Linux/Mac
curl -X POST "http://localhost:8000/predict" \
  -H "Content-Type: application/json" \
  -d '{"text": "ì˜¤ëŠ˜ ì •ë§ ê¸°ë¶„ì´ ì¢‹ë‹¤!"}'
```

**ì‘ë‹µ ì˜ˆì‹œ**:
```json
{
  "text": "ì˜¤ëŠ˜ ì •ë§ ê¸°ë¶„ì´ ì¢‹ë‹¤!",
  "sentiment": "positive",
  "confidence": 0.9527,
  "processing_time": 0.1203
}
```

#### ë¶€ì • í…ìŠ¤íŠ¸
```bash
curl -X POST "http://localhost:8000/predict" \
  -H "Content-Type: application/json" \
  -d '{"text": "ì •ë§ ìµœì•…ì˜ í•˜ë£¨ì˜€ë‹¤."}'
```

**ì‘ë‹µ ì˜ˆì‹œ**:
```json
{
  "text": "ì •ë§ ìµœì•…ì˜ í•˜ë£¨ì˜€ë‹¤.",
  "sentiment": "negative",
  "confidence": 0.8931,
  "processing_time": 0.1157
}
```

#### ì¤‘ë¦½ í…ìŠ¤íŠ¸
```bash
curl -X POST "http://localhost:8000/predict" \
  -H "Content-Type: application/json" \
  -d '{"text": "ì˜¤ëŠ˜ ë‚ ì”¨ëŠ” íë¦¼ì…ë‹ˆë‹¤."}'
```

**ì‘ë‹µ ì˜ˆì‹œ**:
```json
{
  "text": "ì˜¤ëŠ˜ ë‚ ì”¨ëŠ” íë¦¼ì…ë‹ˆë‹¤.",
  "sentiment": "neutral",
  "confidence": 0.7215,
  "processing_time": 0.1089
}
```

### 3. API ë¬¸ì„œ í™•ì¸

ë¸Œë¼ìš°ì €ì—ì„œ ë‹¤ìŒ URL ì ‘ì†:
- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc
- **Root**: http://localhost:8000/

---

## âŒ ë¬¸ì œ í•´ê²° (Troubleshooting)

### 1. ModuleNotFoundError ì—ëŸ¬
**ì¦ìƒ**:
```
ModuleNotFoundError: No module named 'fastapi'
```

**í•´ê²°**:
```bash
# ì˜ì¡´ì„± ì¬ì„¤ì¹˜
pip install -r requirements.txt
```

### 2. ëª¨ë¸ ë‹¤ìš´ë¡œë“œ ì‹œê°„ ì˜¤ë˜ ê±¸ë¦¼
**ì¦ìƒ**: ì²« ì‹¤í–‰ ì‹œ 5ë¶„ ì´ìƒ ì†Œìš”

**ì›ì¸**: Hugging Faceì—ì„œ ëª¨ë¸ ë‹¤ìš´ë¡œë“œ (ì•½ 500MB)

**í•´ê²°**: ì¸ë‚´ì‹¬ì„ ê°€ì§€ê³  ê¸°ë‹¤ë¦¬ê¸°. ì´í›„ ì‹¤í–‰ì€ ìºì‹œ ì‚¬ìš©ìœ¼ë¡œ ë¹ ë¦„.

**ë¡œê·¸ ì˜ˆì‹œ**:
```
Downloading (â€¦)lve/main/config.json: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 747/747 [00:00<00:00, 373kB/s]
Downloading model.safetensors: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 501M/501M [02:15<00:00, 3.70MB/s]
```

### 3. Port already in use
**ì¦ìƒ**:
```
OSError: [Errno 98] Address already in use
```

**í•´ê²°**:
```bash
# 8000 í¬íŠ¸ë¥¼ ì‚¬ìš© ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
# Windows
netstat -ano | findstr :8000
taskkill /PID [í”„ë¡œì„¸ìŠ¤ID] /F

# Linux/Mac
lsof -ti:8000 | xargs kill -9
```

### 4. CUDA/GPU ê´€ë ¨ ê²½ê³ 
**ì¦ìƒ**:
```
UserWarning: CUDA is not available, using CPU
```

**í•´ê²°**: ë¬´ì‹œí•´ë„ ë¨. CPUë¡œ ë™ì‘ ê°€ëŠ¥ (ì¶”ë¡  ì‹œê°„ ì•½ê°„ ëŠë¦¼)

### 5. Pydantic Warning (model_ namespace)
**ì¦ìƒ**:
```
UserWarning: Field "model_name" has conflict with protected namespace "model_".
```

**í•´ê²°**: ë¬´ì‹œí•´ë„ ë¨. ê¸°ëŠ¥ì—ëŠ” ì˜í–¥ ì—†ìŒ.

### 6. Docker ë¹Œë“œ ì‹¤íŒ¨
**ì¦ìƒ**: Docker Compose ì‹¤í–‰ ì‹œ ì—ëŸ¬

**í•´ê²°**:
1. Docker Desktopì´ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
2. WSL2 ë°±ì—”ë“œ í™œì„±í™” (Windows)
3. Docker Desktop ì„¤ì •ì—ì„œ ë©”ëª¨ë¦¬ 4GB ì´ìƒ í• ë‹¹

---

## ğŸ“ ì‹¤í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì²« ì‹¤í–‰ ì‹œ
- [ ] Python 3.10+ ì„¤ì¹˜ í™•ì¸
- [ ] ì‹¤ìŠµê²°ê³¼ í´ë”ë¡œ ì´ë™
- [ ] `.env` íŒŒì¼ ìƒì„± (`.env.example` ë³µì‚¬)
- [ ] `pip install -r requirements.txt` ì‹¤í–‰
- [ ] ì¸í„°ë„· ì—°ê²° í™•ì¸ (ëª¨ë¸ ë‹¤ìš´ë¡œë“œìš©)
- [ ] 8000ë²ˆ í¬íŠ¸ ì‚¬ìš© ê°€ëŠ¥ í™•ì¸

### ì„œë¹„ìŠ¤ ì‹¤í–‰ í›„
- [ ] http://localhost:8000/health ì ‘ì† í™•ì¸
- [ ] `"model_loaded": true` í™•ì¸
- [ ] http://localhost:8000/docs ì ‘ì†í•˜ì—¬ API ë¬¸ì„œ í™•ì¸
- [ ] ê°ì • ë¶„ì„ í…ŒìŠ¤íŠ¸ (ê¸ì •/ë¶€ì •/ì¤‘ë¦½)

---

## ğŸ”§ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

`.env` íŒŒì¼ì—ì„œ ë‹¤ìŒ ê°’ ìˆ˜ì • ê°€ëŠ¥:

```bash
# ì„œë²„ í¬íŠ¸ ë³€ê²½
SERVER_PORT=8080

# ë¡œê·¸ ë ˆë²¨ ë³€ê²½ (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=DEBUG

# ëª¨ë¸ ë³€ê²½ (ë‹¤ë¥¸ Hugging Face ëª¨ë¸ ì‚¬ìš©)
MODEL_NAME=cardiffnlp/twitter-roberta-base-sentiment-latest
```

---

## ğŸ“Š ì„±ëŠ¥ ì§€í‘œ

### í•˜ë“œì›¨ì–´ ìš”êµ¬ì‚¬í•­
| í•­ëª© | ìµœì†Œ | ê¶Œì¥ |
|------|------|------|
| CPU | 2 cores | 4+ cores |
| RAM | 2GB | 4GB+ |
| ë””ìŠ¤í¬ | 2GB (ëª¨ë¸ í¬í•¨) | 5GB+ |
| ë„¤íŠ¸ì›Œí¬ | í•„ìˆ˜ (ì²« ì‹¤í–‰ ì‹œ) | - |

### ì‘ë‹µ ì‹œê°„
| í…ìŠ¤íŠ¸ ê¸¸ì´ | í‰ê·  ì‹œê°„ | ìµœëŒ€ ì‹œê°„ |
|-------------|-----------|-----------|
| ì§§ìŒ (10ì) | 0.08ì´ˆ | 0.15ì´ˆ |
| ì¤‘ê°„ (100ì) | 0.12ì´ˆ | 0.20ì´ˆ |
| ê¸´ (500ì) | 0.25ì´ˆ | 0.35ì´ˆ |

### ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
- **ëª¨ë¸ ë¡œë“œ ì „**: ~100MB
- **ëª¨ë¸ ë¡œë“œ í›„**: ~520MB
- **ì¶”ë¡  ì¤‘**: ~550MB

---

## ğŸ¯ ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸

### Windows (PowerShell)
```powershell
# ì €ì¥: test.ps1
cd "ì‹¤ìŠµê²°ê³¼\src"
Start-Process python -ArgumentList "main.py" -NoNewWindow

# 10ì´ˆ ëŒ€ê¸° (ëª¨ë¸ ë¡œë”©)
Start-Sleep -Seconds 10

# í—¬ìŠ¤ì²´í¬
Invoke-RestMethod -Uri "http://localhost:8000/health"

# í…ŒìŠ¤íŠ¸
$body = @{ text = "ì¢‹ì€ í•˜ë£¨!" } | ConvertTo-Json
Invoke-RestMethod -Uri "http://localhost:8000/predict" -Method POST -Body $body -ContentType "application/json"
```

### Linux/Mac (Bash)
```bash
#!/bin/bash
# ì €ì¥: test.sh

cd ì‹¤ìŠµê²°ê³¼/src
python main.py &
PID=$!

# 10ì´ˆ ëŒ€ê¸°
sleep 10

# í—¬ìŠ¤ì²´í¬
curl http://localhost:8000/health

# í…ŒìŠ¤íŠ¸
curl -X POST "http://localhost:8000/predict" \
  -H "Content-Type: application/json" \
  -d '{"text": "ì¢‹ì€ í•˜ë£¨!"}'

# ì¢…ë£Œ
kill $PID
```

---

## ğŸ’¡ Tips

1. **ëª¨ë¸ ìºì‹œ ìœ„ì¹˜**:
   - Windows: `C:\Users\[ì‚¬ìš©ì]\.cache\huggingface\`
   - Linux/Mac: `~/.cache/huggingface/`

2. **ë¡œê·¸ í™•ì¸**:
   - ì½˜ì†”ì—ì„œ ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸ ê°€ëŠ¥
   - `ì‹¤ìŠµê²°ê³¼/logs/` í´ë”ì—ë„ ì €ì¥ë¨ (Docker ì‹¤í–‰ ì‹œ)

3. **ê°œë°œ ëª¨ë“œ í™œì„±í™”**:
   ```bash
   # .env íŒŒì¼ ìˆ˜ì •
   DEBUG_MODE=true
   ```
   ì½”ë“œ ë³€ê²½ ì‹œ ìë™ ë¦¬ë¡œë“œ

4. **ë‹¤ë¥¸ ëª¨ë¸ ì‚¬ìš©**:
   - Hugging Face Hubì—ì„œ ê°ì •ë¶„ì„ ëª¨ë¸ ì„ íƒ
   - `.env`ì˜ `MODEL_NAME` ë³€ê²½

---

## ğŸš¨ ì•Œë ¤ì§„ ì´ìŠˆ

### Issue #1: run.bat ì‘ë™ ì•ˆ í•¨
**ì›ì¸**: êµ¬ì¡° ë³€ê²½ í›„ ê²½ë¡œ ë¶ˆì¼ì¹˜

**í•´ê²°**: ì´ ê°€ì´ë“œì˜ "ë°©ë²• 1: Python ì§ì ‘ ì‹¤í–‰" ì‚¬ìš©

### Issue #2: Docker Compose ê²½ë¡œ ë¬¸ì œ
**ì›ì¸**: `docker-compose.yml`ì˜ `context: ..` ì„¤ì •

**í•´ê²°**: `ì‹¤ìŠµê²°ê³¼/` í´ë”ì—ì„œ ì‹¤í–‰

### Issue #3: í•œê¸€ ê¹¨ì§ (Windows CMD)
**ì›ì¸**: Windows CMD ì¸ì½”ë”© ë¬¸ì œ

**í•´ê²°**: PowerShell ë˜ëŠ” Git Bash ì‚¬ìš©

---

## ğŸ“ ì¶”ê°€ ë„ì›€ë§

ë” ìì„¸í•œ ë‚´ìš©ì€ ë‹¤ìŒ ë¬¸ì„œ ì°¸ì¡°:
- [í”„ë¡œì íŠ¸ í†µí•©ë³´ê³ ì„œ](í”„ë¡œì íŠ¸-í†µí•©ë³´ê³ ì„œ.md)
- [Docker í•™ìŠµë‚´ìš©](í•™ìŠµë‚´ìš©/Docker-í•™ìŠµë‚´ìš©.md)
- [AI ì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜](í•™ìŠµë‚´ìš©/AI-ì„œë¹„ìŠ¤-ì•„í‚¤í…ì²˜.md)

